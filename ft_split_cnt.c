/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_split_cnt.c                                     :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: fmaurer <fmaurer42@gmail.com>              +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2022/07/29 23:17:18 by fmaurer           #+#    #+#             */
/*   Updated: 2022/07/30 08:26:17 by fmaurer          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <stdlib.h>

int	ft_strlen(char *str)
{
	int		i;
	char	*ptr;

	i = 0;
	ptr = str;
	while (*ptr)
	{
		ptr++;
		i++;
	}
	return (i);
}

/* ft_split -- returns split strings and the number of words
 *
 * TODO: in the end there should be something like ft_split_str_to_int. this
 * should return just all arguments already parsed into an int-array.
 *
 */

void	ft_split_loop(char **mem, char *str, int *wordcnt, int len)
{
	int		j;
	int		k;
	int		inwdcnt;
	char	*wdstart;

	j = -1;
	inwdcnt = 0;
	wdstart = str;
	while (++j <= len)
	{
		if (str[j] == ' ' || str[j] == 0)
		{
			mem[*wordcnt] = (char *)malloc(inwdcnt * sizeof (char));
			k = -1;
			while (++k < inwdcnt)
				mem[*wordcnt][k] = wdstart[k];
			(*wordcnt)++;
			wdstart = &str[j + 1];
			inwdcnt = 0;
		}
		inwdcnt++;
	}
}

char	**ft_split_cnt(char *str, int *words)
{
	char	**mem;
	int		wordcnt;
	int		len;

	wordcnt = 0;
	len = ft_strlen(str);
	mem = (char **)malloc(4 * len * sizeof (char *));
	if (mem == NULL)
		return (NULL);
	ft_split_loop(mem, str, &wordcnt, len);
	*words = wordcnt;
	return (mem);
}
